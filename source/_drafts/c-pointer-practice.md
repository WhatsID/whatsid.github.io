---
title: C语言指针初探
date: 2021-10-27 22:10:24
tags:
---

*这几天在学习C语言，在指针方面遇到了一点问题，有了一些探索，所以记录下来。因为刚开始学，对C语言的理解还很浅，有些认知可能还是错误的。所以本篇内容谨慎吸收。*

## 指针是什么
C语言中有四种数据类型：
基本数据类型
构造数据类型
void类型


指针是一个值，该值是一个0x开头的16位数字，一般说指针指向了内存中的一块地址，其实际的含义为：这个0x开头的16位数字代表了内存中的一块物理地址的编号。内存中的每个字节都有一个地址编号，如果把一个字节比喻为一个集装箱的话，那地址编号就是贴在集装箱上号码，有了号码，我们便可以找到这个集装箱，进而找到集装箱里装的内容。那集装箱里都有可能装什么东西呢？基本类型、构造类型、指针类型、方法、字符串等等。

集装箱有什么性质呢?

- 有可能存了东西，也有可能什么都没存
- 有可能存的是一个值，也有可能

先来看一个简单的变量声明的例子:

```
int i = 1;
```

这句话声明了一个变量i并赋值为1，这句话会拿出两个集装箱来用，第一个集装箱存放了i的`地址`，第二个集装箱存放了i的`值`，第一个集装箱中存放的地址就是第二个集装箱的编号。怎么证明用到了两个集装箱呢

```
printf("变量i的地址为:%p",&i);
printf("变量i中存放的值为:%d",i);

输出为--->
变量i的地址为:0x7ffee326842c
变量i中存放的值为:1
```

对于基本数据类型来说比较好理解，一句声明语句就是产生了两个集装箱，一个用来存放地址，一个用来存放实际值。（如果声明时未赋值，那存放值这个集装箱里存的东西是未知的）

再来看另外一个例子：

```
char *str = "你好";
```

这句话产生了几个集装箱呢？三个。

- &str
- str
- *(&str)

这里用到了两个字符: `&` 和 `*` ，要理解C语言的指针，就要先理解这两个字符；

- &：代表取出这个变量本身的地址
- *：代表取出这个变量存放的内容指向的内容

什么叫内容指向的内容呢？如果一个集装箱里存放的是另外一个集装箱的编号，我们根据这个编号找到另外一个集装箱，取出里面存的内容，这就叫内容指向的内容，因为第一个内容就是一个编号。

在上面的程序语句中，`&str`代表：str这个变量本身的地址，而`*(&str)`就代表：取出str这个变量中存放的地址指向的内容，即为 你好 。

所以对上面的`int i = 1;`来说，有另外一种取值方法：`*(&i)`,只不过对于基本数据类型来说，取值不用这么麻烦的方法，直接用 `i` 即可。


## printf和scanf是什么

%d转换为int，%s转换为字符串，%p转换为地址

在上面的例子中，我们有了地址，就取出地址对应的实际的值，那是不是只要有地址就能取值呢？看一个例子

char *str;


看下面两个例子：

```
char *str;
scanf("%s", str)
scanf("%s", &str);
```


